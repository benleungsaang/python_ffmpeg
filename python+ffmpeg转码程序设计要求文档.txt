


用python+ffmpeg写一个视频转码程序，要求如下：
1、以TK界面按顺序布置以下控件，界面开启置顶
视频文件地址输入框：接受输入文本，拖入文件识别地址，点击按钮选择文件三种方式填入地址；
扫描视频文件夹地址输入框：接受输入文本，拖入文件（夹）识别地址，点击按钮选择文件（夹）三种方式填入地址；
扫描视频地址右边是扫描按钮，再右边是转码后覆盖与否的复选框，不覆盖就转码放到当前程序目录，默认不覆盖
单个选择视频文件或扫描文件，均添加到任务列表中
当前任务进度条
任务队列进度条
任务列表，显示：文件名，原文件大小，转码后文件大小，转码用时，转码状态（待执行，已完成，执行失败）
每个任务的右边提供删除按钮（执行中的任务如果点击删除，弹出确认框，确认就中止任务并删除任务）
任务执行完成后把文件列表中显示的信息整理整齐格式，保存到程序目录的log.txt中，特别是失败的错误信息也要记录清晰，失败也记好失败时的用时
任务开始按钮，按钮宽度为整程序的宽度，高度为4行高
暂停任务按钮，暂停除运行中的任务，后续任务待重新点击开始按钮开始
清空已完成任务的按钮

补充以下功能：
同时多个视频文件拖入，识别为多个任务添加
添加配置转码参数按钮，点击弹出文本框，输入转码参数，默认转码采用内置以下这段参数：
    "-c:v libx264 -profile:v main -level 4.0 "
    "-crf 28 -preset medium "
    "-maxrate 8500000 -bufsize 17000000 "
    "-vf scale=w=min(iw\\,1920):h=-2:force_original_aspect_ratio=decrease,pad=width=ceil(iw/2)*2:height=ceil(ih/2)*2:x=0:y=0:color=black,format=yuv420p "
    "-c:a aac -ac 2 -ar 44100 -b:a 128000 "
    "-r 30 "
    "-f mp4 -movflags +faststart -y"


补充以下功能：
对任务列表中的任务添加右键菜单功能，分别为“打开文件、打开目录、删除任务”

注意：
参数不能有双引号
注意对中文的适配

列表中添加完成时间，插在转码后大小与转码用时之间
整个界面也可以触发文件（夹）拖入，拖到地址栏的话是专用拖入识别，拖到其它地方是自动识别文件或文件夹
处理任务按钮的状态处理，开始任务后当前按钮变成暂停任务按钮，原来的暂停任务按钮删除，配置转码参数在任务运行中禁止使用

在扫描地址与扫描按钮间再添加两个输入框，一个是扫描关键字框，一个是转码后对关键字替换的框
没输入扫描关键字就扫描全部视频文件，有输入关键字的话只添加文件名中含关键字的文件
如果有输入关键字替换框的话，转码后文件名的关键字替换，没输入的话不用处理


修复 设置了 -f mp4格式，置换出来还是原来的格式
当前转码任务的进度条还没有正确回调


扫描文件功能扫描到一个就没继续扫描了，实际目录中有多个符合要求的文件，修复此问题
“转码后覆盖原文件”功能修改为“转码后输出到原目录”（注意替换关键字的要求），默认选上



"-c:v libx264 -profile:v main -level 4.0 "
            "-crf 28 -preset medium "
            "-maxrate 8500000 -bufsize 17000000 "
            "-vf scale=w=min(iw,1920):h=-2:force_original_aspect_ratio=decrease,pad=width=ceil(iw/2)*2:height=ceil(ih/2)*2:x=0:y=0:color=black,format=yuv420p "
            "-c:a aac -ac 2 -ar 44100 -b:a 128000 "
            "-r 30 "
            "-threads 0 -x264-params \'threads=0:sliced-threads=1\' "
            "-movflags +faststart -y -f mp4"


  "-c:v libx264 -profile:v main -level 4.0 "
    "-crf 28 -preset medium "
    "-maxrate 8500000 -bufsize 17000000 "
    "-vf scale=w=min(iw\\,1920):h=-2:force_original_aspect_ratio=decrease,pad=width=ceil(iw/2)*2:height=ceil(ih/2)*2:x=0:y=0:color=black,format=yuv420p "
    "-c:a aac -ac 2 -ar 44100 -b:a 128000 "
    "-r 30 "
    "-threads 0 "  # 全局自动适配核心（解码/过滤/编码均用最大可用线程）
    "-x264-params 'frame-threads=auto' "  # 启用 libx264 高效帧线程（自动适配）
    "-movflags +faststart -y -f mp4"

